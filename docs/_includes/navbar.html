<script>
    // Function to toggle theme and save preference
    function toggleTheme() {
        const body = document.body;
        body.classList.toggle('dark-mode');
        body.classList.toggle('light-mode');

        const currentTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
        localStorage.setItem('theme', currentTheme);
        updateThemeToggleButton(currentTheme);
    }

    // Function to update the theme toggle button's appearance
    function updateThemeToggleButton(theme) {
        const button = document.getElementById('theme-toggle');
        if (button) {
            if (theme === 'dark') {
                button.style.backgroundColor = '#333333'; /* Dark mode background */
                button.innerHTML = 'ðŸŒ™'; /* Moon icon in dark mode */
            } else {
                button.style.backgroundColor = '#ef0ec'; /* Light mode background */
                button.innerHTML = 'â˜€'; /* Sun icon in light mode */
            }
        }
    }

    // Function to apply the saved theme on page load
    function applySavedTheme() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.classList.add(savedTheme + '-mode');
            updateThemeToggleButton(savedTheme);
        } else {
            // Default to light mode if no preference is saved
            document.body.classList.add('light-mode');
            updateThemeToggleButton('light');
        }
    }

    // Call the function when the page loads
    window.onload = applySavedTheme;
</script>

<style>
    .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
    }

    .navbar ul {
        list-style-type: none;
        display: flex;
        gap: 16px;
        /* Space between menu items */
    }

    .navbar a {
        text-decoration: none;
        color: #333;
    }

    #theme-toggle {
        margin-left: 16px;
        border: none;
        /* Remove default border */
        padding: 8px 12px;
        /* Button padding */
        cursor: pointer;
        /* Change the cursor to a pointer */
    }

    @media (max-width: 720px) {
        .navbar ul {
            flex-direction: column;
            /* Stack links vertically on small screens */
            align-items: flex-start;
            /* Align links to the left */
            width: 100%;
            /* Full width for vertical alignment */
        }

        #theme-toggle {
            margin-top: 16px;
            /* Add space above the toggle button */
            margin-left: 0;
            /* Reset left margin for vertical layout */
        }
    }
</style>

<nav>
    <div class="navbar">
        <ul>
            <li><a href="{{ '/' }}">Home</a></li>
            <li><a href="{{ '/about' }}">About Me</a></li>
            <li><a href="{{ '/posts' }}">My Blog</a></li>
        </ul>
        <button id="theme-toggle" onclick="toggleTheme()">â˜€</button>
    </div>
</nav>
